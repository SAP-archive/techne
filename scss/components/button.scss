@import "../core/settings";
@import "../core/mixins";
@import "../core/functions";
@import "mixins";

/*!
.tn-button+( (--small | --large), --icon, --text, --link)+( (.is-disabled | [aria-disabled=true]) | (.is-selected | [aria-selected=true]))
    .tn-button__icon+(.tn-icon)
*/

//set component name using namespace function, then use #{$block} below
$block: ns(button);
.#{$block} {
    //SETTINGS
    $tn-button-color: tn-color(text-inverse, 2) !default;
    $tn-button-color--hover: $tn-button-color !default;
    $tn-button-color--text: $tn-color--link !default;
    $tn-button-color--active: $tn-button-color !default;
    $tn-button-color--disabled: tn-color(text, 2) !default;
    $tn-button-background-color: tn-color(action) !default;
    $tn-button-background-color--hover: darken($tn-button-background-color, 5) !default;
    $tn-button-background-color--active: darken($tn-button-background-color,10) !default;
    $tn-button-background-color--disabled: tn-color(neutral) !default;
    $tn-button-shadow--focus: 0 0 4px 1px rgba(tn-color(neutral, 4), 1) !default;

    //sizes
    $tn-button-height: tn-space(13) !default;
    $tn-button-height--small: tn-space(10) !default;
    $tn-button-height--large: tn-space(19) !default;
    $tn-button-height--link: tn-space(7) !default;
    $tn-button-height--link-small: tn-space(6) !default;
    $tn-button-icon-height: 26px !default;
    $tn-button-icon-height--small: 18px !default;
    $tn-button-icon-height--large: 32px !default;
    //anim
    $tn-button-transition-params: 0.25s ease-in !default;

    //BASE
    //set all reset and baseline block styles
    @include tn-button-reset;
    @include tn-type(2, header, semi);
    display: inline-block;
    background-color: $tn-button-background-color;
    transition: background-color $tn-button-transition-params;
    color: $tn-button-color;
    max-height: $tn-button-height;
    height: $tn-button-height;
    line-height: $tn-button-height;
    padding-left: tn-space(5);
    padding-right: tn-space(5);
    text-align: center;
    text-transform: uppercase;
    //MODIFIERS
    &--small {
        @include tn-type(0);
        @include tn-weight(semi);
        max-height: $tn-button-height--small;
        height: $tn-button-height--small;
        line-height: $tn-button-height--small;
        padding-left: tn-space(4);
        padding-right: tn-space(4);
    }
    &--large {
        max-height: $tn-button-height--large;
        height: $tn-button-height--large;
        line-height: $tn-button-height--large;
        padding-left: tn-space(7);
        padding-right: tn-space(7);
    }
    &:hover {
        background-color: $tn-button-background-color--hover;
        color: $tn-button-color--hover;
        text-decoration: none;
    }
    &:focus {
        color: $tn-button-color--hover;
        box-shadow: $tn-button-shadow--focus;
        outline: solid 2px lighten($tn-button-background-color, 15);
    }
    &:active,
    &.is-active,
    &[aria-selected="true"],
    &.is-selected {
        background-color: $tn-button-background-color--active;
        color: $tn-button-color--active;
    }
    &[aria-disabled="true"],
    &.is-disabled {
        outline: solid 1px tn-color(neutral, 2);
        color: $tn-button-color--disabled;
        background-color: $tn-button-background-color--disabled;
        cursor: not-allowed;
    }
    &--text,
    &--link {
        color: $tn-button-color--text;
        background-color: transparent;
        &:hover,
        &:focus {
            background-color: transparent;
            color: darken($tn-button-color--text, 5);
        }
        &:active,
        &[aria-selected="true"],
        &.is-selected,
        &[aria-disabled="true"],
        &.is-disabled {
            background-color: transparent;
            outline: none;
            box-shadow: none;
        }
        &:active,
        &[aria-selected="true"],
        &.is-selected {
            color: darken($tn-button-color--text, 10);
        }
        &[aria-disabled="true"],
        &.is-disabled {
            color: $tn-button-color--disabled;
        }
    }
    &--link {
        height: $tn-button-height--link;
        line-height: $tn-button-height--link;
        padding-left: tn-space(4);
        padding-right: tn-space(4);
        position: relative;
        //adjustment for small button
        &.#{$block}--small {
            height: $tn-button-height--link-small;
            line-height: $tn-button-height--link-small;
        }
        &::after {
            content: "";
            border-bottom: solid 2px transparent;
            width: calc(100% - #{tn-space(4)}*2);
            height: 2px;
            position: absolute;
            bottom: 1px;
            left: 0;
            margin-left: tn-space(4);
        }
        &:focus {
            outline: none;
            box-shadow: none;
        }
        &:hover,
        &:focus,
        &:active,
        &[aria-selected="true"],
        &.is-selected {
            &::after {
                border-bottom-color: $tn-button-color--text;
            }
        }
        &[aria-disabled="true"],
        &.is-disabled {
            &::after {
                display: none;
            }
        }
    }
    //icon modifier (use if there is no text)
    &--icon {
        &.#{$block}--large {
            $icon-size_: $tn-button-icon-height--large;
            min-width: tn-space(7) * 2 + $icon-size_;
            position: relative;
            .#{$block}__icon {
                $icon-size_: 32px;
                position: absolute;
                left: calc(50% - #{$icon-size_}/2);
                top: tn-space(3);
                width: $icon-size_;
                height: $icon-size_;
            }
            &::after {
                @include tn-type(-3);
                display: inline-block;
                transform: translateY(tn-space(3));
                content: attr(aria-label);
            }
        }
    }
    //ELEMENTS
    &__icon {
        display: inline-block;
        vertical-align: top;
        position: relative;
        margin-right: tn-space(3);
        @at-root {
            .#{$block}--icon & {
                margin-right: 0;
            }
        }
        //revisit — sizes will be part of the icons
        width: $tn-button-icon-height;
        height: $tn-button-icon-height;
        line-height: $tn-button-icon-height;
        top: $tn-button-height / 2 - $tn-button-icon-height / 2;
        font-size: 26px; //temp
        @at-root {
            .#{$block}--small & {
                font-size: 18px; //temp
                width: $tn-button-icon-height--small;
                height: $tn-button-icon-height--small;
                line-height: $tn-button-icon-height--small;
                top: $tn-button-height--small / 2 - $tn-button-icon-height--small / 2;
            }
        }
        @at-root {
            .#{$block}--large & {
                font-size: 32px; //temp
                width: $tn-button-icon-height--large;
                height: $tn-button-icon-height--large;
                line-height: $tn-button-icon-height--large;
                top: $tn-button-height--large / 2 - $tn-button-icon-height--large / 2;
            }
        }
    }
}
